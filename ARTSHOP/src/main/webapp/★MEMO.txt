--시작 : ARTSHOP_MAIN.jsp
--SQL : 
//회원 테이블
drop sequence artshop_memseq;
create sequence artshop_memseq
	increment by 1
	start with 1
	minvalue 0
	maxvalue 10000
	nocache;
	
drop table artshop_member;
create table artshop_member(
	memnum number primary key,
	memid varchar2(20),
	mempw varchar2(20),
	memname varchar2(12),
	memnick varchar2(20),
	memrrn1 varchar2(10),
	memrrn2 varchar2(10),
	memkind varchar(10),
	mempic varchar(50),
	mempr varchar(150)
	);
	
insert into artshop_member
(memnum, memid, mempw, memname, memnick, 
memrrn1, memrrn2, memkind) 
values(artshop_memseq.nextval, 'admin', '1234', 
'관리자', '세월', '970404', '4333333', '운영');

insert into artshop_member
values(artshop_memseq.nextval, 'art', '1111', 
'김아트', '아트', '970505', '4444444', '작가',
'profile001.png', '동화 삽화 프리랜서 아트입니다!');

insert into artshop_member
(memnum, memid, mempw, memname, memnick, 
memrrn1, memrrn2, memkind, mempic) 
values(artshop_memseq.nextval, 'client', '2222', 
'김고객', '고고', '970606', '5555555', '일반',
'profile002.png');

//카테고리 테이블
drop sequence artshop_catseq;
create sequence artshop_catseq
	increment by 1
	start with 1
	minvalue 0
	maxvalue 10000
	nocache;
drop table artshop_category;
create table artshop_category(
	catnum number primary key,
	catname varchar2(20)
	);
	
insert into artshop_category
values(artshop_catseq.nextval, '(커미션)SD');
insert into artshop_category
values(artshop_catseq.nextval, '(커미션)MD');
insert into artshop_category
values(artshop_catseq.nextval, '(커미션)LD');
insert into artshop_category
values(artshop_catseq.nextval, '(커미션)VIRTUAL');

insert into artshop_category
values(artshop_catseq.nextval, '(외주)SD');
insert into artshop_category
values(artshop_catseq.nextval, '(외주)MD');
insert into artshop_category
values(artshop_catseq.nextval, '(외주)LD');
insert into artshop_category
values(artshop_catseq.nextval, '(외주)VIRTUAL');
	
//상품 테이블
drop sequence artshop_proseq;
create sequence artshop_proseq
	increment by 1
	start with 1
	minvalue 0
	maxvalue 10000
	nocache;

drop table artshop_product;
create table artshop_product(
	pronum number primary key,
	prosub varchar2(100),
	prowri varchar2(20),
	procat varchar2(20),
	procon varchar2(200),
	propri number
	);
	
insert into artshop_product
values(artshop_proseq.nextval, '동화느낌의 심플 삽화 커미션',
'아트', '(커미션)MD',
'따뜻한 동화 삽화 느낌의 그림이 주력인 작가 아트입니다.<br>작업기간은 최소 일주일, 최대 2주입니다.',
25000);

//주문 테이블
drop sequence artshop_ordseq;
create sequence artshop_ordseq
	increment by 1
	start with 1
	minvalue 0
	maxvalue 10000
	nocache;

drop table artshop_order;
create table artshop_order(
	ordnum number primary key,
	memnum number,
	pronum number,
	ordpri number,
	ordask varchar2(100),
	ordemail varchar2(30),
	ordstat varchar2(10)
	);
	
insert into artshop_order
values(artshop_ordseq.nextval, 3, 1, 28000, '따뜻한 색감으로 그려주세요.', 'client@naver.com', '대기');

//문의게시판 테이블
drop table board cascade constraints purge ;
create table board(
	num number not null primary key,
	writer varchar2(10) not null,
	email varchar2(10),
	subject varchar2(20) not null,
	passwd varchar2(12) not null,
	reg_date date not null,
	readcount int default 0,
	ref number  default 0 not null,
	re_step number default 0 not null,
	re_level number default 0 not null,
	content varchar2(50) not null,
	ip varchar2(15)  not null
);

drop sequence board_seq ;

create sequence board_seq
increment by 1
start with 1
minvalue 0
maxvalue 10000
nocache;


select m.name as mname, m.id mid, 
p.pname, o.qty, o.amount 
from (members m inner join orders o 
on m.no = o.memno) inner join product p 
on o.pnum = p.pnum where id='hong';
	
insert into artshop_board
values(artshop_boaseq.nextval, '주문 취소 문의합니다',
'client', 'client@naver.com', '3333', '2023-04-06',
'주문한 거 취소 부탁드려요.',0,0,0,0);